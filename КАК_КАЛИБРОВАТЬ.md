# –ö–∞–∫ –∫–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å –ø–æ—Ä–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã

## üéØ –¶–µ–ª—å

–ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å **initial estimates** –≤ **calibrated thresholds** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

---

## üìä –ß—Ç–æ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É–µ—Ç:

1. **–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Ä–æ–≥–æ–≤** ‚Üí `logs/calibration/threshold_hits.jsonl`
   - –ö–∞–∫–æ–π –ø–æ—Ä–æ–≥ –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è
   - –ö–∞–∫–æ–µ –±—ã–ª–æ –∑–Ω–∞—á–µ–Ω–∏–µ
   - –°—Ä–∞–±–æ—Ç–∞–ª –ª–∏ –ø–æ—Ä–æ–≥
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç (–∏—Å—Ç–æ—á–Ω–∏–∫, –≤—Ä–µ–º—è, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)

2. **–í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** ‚Üí `logs/calibration/value_distributions.jsonl`
   - –í—Å–µ —á–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç –≤—Å–µ—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤
   - –î–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
   - –î–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–µ–π

---

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

### –ß–µ—Ä–µ–∑ HTTP API

```bash
curl http://localhost:8080/health
```

–û—Ç–≤–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç —Å–µ–∫—Ü–∏—é `calibration`:
```json
{
  "calibration": {
    "days_collecting": 5.2,
    "threshold_hits_logged": 1234,
    "values_logged": 5678,
    "ready_for_calibration": false,
    "log_files": {
      "threshold_hits": "logs/calibration/threshold_hits.jsonl",
      "value_distributions": "logs/calibration/value_distributions.jsonl"
    }
  }
}
```

### –ß–µ—Ä–µ–∑ Python

```python
from src.monitoring.calibration_tracker import get_tracker

tracker = get_tracker()
stats = tracker.get_stats()
print(f"–°–æ–±—Ä–∞–Ω–æ –¥–∞–Ω–Ω—ã—Ö –∑–∞ {stats['days_collecting']:.1f} –¥–Ω–µ–π")
print(f"–ì–æ—Ç–æ–≤–æ –∫ –∫–∞–ª–∏–±—Ä–æ–≤–∫–µ: {stats['ready_for_calibration']}")
```

---

## üìà –ö–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä–æ–≥–∏

### –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞

```python
from src.monitoring.calibration_tracker import get_tracker

tracker = get_tracker()

# –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä–æ–≥–∞ quantum_rng.randomness_score
analysis = tracker.analyze_threshold("quantum_rng.randomness_score.min")

print(f"–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫: {analysis['total_checks']}")
print(f"–°—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π: {analysis['triggered_count']}")
print(f"–ß–∞—Å—Ç–æ—Ç–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π: {analysis['trigger_rate']:.2%}")
print(f"\n–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π:")
print(f"  Min: {analysis['value_stats']['min']:.4f}")
print(f"  P50: {analysis['value_stats']['p50']:.4f}")
print(f"  P95: {analysis['value_stats']['p95']:.4f}")
print(f"  P99: {analysis['value_stats']['p99']:.4f}")
print(f"  Max: {analysis['value_stats']['max']:.4f}")
print(f"\n–¢–µ–∫—É—â–∏–π –ø–æ—Ä–æ–≥: {analysis['current_threshold']}")
print(f"–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: {analysis['recommendation']}")
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫: 1440
–°—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π: 23
–ß–∞—Å—Ç–æ—Ç–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π: 1.60%

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π:
  Min: 0.8234
  P50: 0.9512
  P95: 0.9687
  P99: 0.9723
  Max: 0.9801

–¢–µ–∫—É—â–∏–π –ø–æ—Ä–æ–≥: 0.95
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ‚úÖ Trigger rate (1.60%) seems reasonable.
```

---

## üõ†Ô∏è –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Ä–æ–≥–∏

### 1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ

```python
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤—Å–µ—Ö –ø–æ—Ä–æ–≥–æ–≤
from src.monitoring.calibration_tracker import get_tracker
import json

tracker = get_tracker()

# –°–ø–∏—Å–æ–∫ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ—Ä–æ–≥–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
critical_thresholds = [
    "quantum_rng.randomness_score.min",
    "earthquake.max_magnitude.trigger_above",
    "crypto.BTCUSDT.price.change_pct",
]

for threshold_name in critical_thresholds:
    print(f"\n{'='*60}")
    print(f"–ê–Ω–∞–ª–∏–∑: {threshold_name}")
    print('='*60)
    
    analysis = tracker.analyze_threshold(threshold_name)
    
    if "error" in analysis:
        print(f"‚ùå {analysis['error']}")
        continue
    
    print(json.dumps(analysis, indent=2))
```

### 2. –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ

–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞:

- **Trigger rate > 10%** ‚Üí –ü–æ—Ä–æ–≥ —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π, –º–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- **Trigger rate < 1%** ‚Üí –ü–æ—Ä–æ–≥ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–π, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–æ–±—ã—Ç–∏—è
- **Trigger rate 1-5%** ‚Üí –û–±—ã—á–Ω–æ —Ö–æ—Ä–æ—à–æ

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏–º –Ω–∞ –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–∏:
- P95 = 95% –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∏–∂–µ —ç—Ç–æ–≥–æ
- P99 = 99% –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∏–∂–µ —ç—Ç–æ–≥–æ

### 3. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

#### –î–ª—è –ø–æ—Ä–æ–≥–æ–≤ –≤ `config.json`:

```json
{
  "analysis": {
    "z_score_threshold": 3.0,  // –ë—ã–ª–æ 3.0, —Å—Ç–∞–ª–æ 3.5 (–ø–æ—Å–ª–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏)
    "cluster_window_seconds": 30.0  // –ë—ã–ª–æ 30, —Å—Ç–∞–ª–æ 45 (–ø–æ—Å–ª–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏)
  }
}
```

#### –î–ª—è –ø–æ—Ä–æ–≥–æ–≤ –≤ –∫–æ–¥–µ (`threshold_detector.py`):

```python
# –ë—ã–ª–æ:
ThresholdRule(
    parameter_pattern="quantum_rng.randomness_score",
    min_absolute_value=0.95,  # initial_estimate
    description="–ö–≤–∞–Ω—Ç–æ–≤–∞—è —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å –Ω–∏–∂–µ –Ω–æ—Ä–º—ã"
)

# –°—Ç–∞–ª–æ (–ø–æ—Å–ª–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏):
ThresholdRule(
    parameter_pattern="quantum_rng.randomness_score",
    min_absolute_value=0.93,  # calibrated_on_data_2025-01-14
    description="–ö–≤–∞–Ω—Ç–æ–≤–∞—è —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å –Ω–∏–∂–µ –Ω–æ—Ä–º—ã"
)
```

### 4. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

–í `–ê–£–î–ò–¢_–ü–û–†–û–ì–û–í.md` –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å:

```markdown
| –ü—Ä–∞–≤–∏–ª–æ | –ü–æ—Ä–æ–≥ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---------|-------|--------|-------------|
| `quantum_rng.randomness_score` min | 0.93 | ‚úÖ calibrated_2025-01-14 | P95 = 0.93, trigger rate 2.1% |
```

---

## üìÖ –ö–æ–≥–¥–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **30 –¥–Ω–µ–π** –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- **1000+ –ø—Ä–æ–≤–µ—Ä–æ–∫** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ä–æ–≥–∞
- **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** (–Ω–µ—Ç —á–∞—Å—Ç—ã—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≥—Ä–∞—Ñ–∏–∫

1. **–ß–µ—Ä–µ–∑ 1 –º–µ—Å—è—Ü (—è–Ω–≤–∞—Ä—å 2025):**
   - –ü–µ—Ä–≤–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ—Ä–æ–≥–æ–≤
   - Quantum RNG, Earthquake, Crypto

2. **–ß–µ—Ä–µ–∑ 2 –º–µ—Å—è—Ü–∞ (—Ñ–µ–≤—Ä–∞–ª—å 2025):**
   - –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ—Ä–æ–≥–æ–≤
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–≤–æ–π –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

3. **–ß–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤ (–∏—é–Ω—å 2025):**
   - –ü–æ–ª–Ω–∞—è —Ä–µ-–∫–∞–ª–∏–±—Ä–æ–≤–∫–∞
   - –£—á—ë—Ç —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏

4. **–î–∞–ª–µ–µ:**
   - –ï–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
   - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π

---

## üéì –ü—Ä–∏–º–µ—Ä—ã –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

### –ü—Ä–∏–º–µ—Ä 1: Quantum RNG —Å–ª–∏—à–∫–æ–º —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
Trigger rate: 15.3% (—Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ!)
P95: 0.93
Current threshold: 0.95
```

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü–æ–Ω–∏–∑–∏—Ç—å –ø–æ—Ä–æ–≥ –¥–æ P95
min_absolute_value=0.93  # –ë—ã–ª–æ 0.95
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Trigger rate —Å–Ω–∏–∑–∏—Ç—Å—è –¥–æ ~5%

---

### –ü—Ä–∏–º–µ—Ä 2: Earthquake –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
Trigger rate: 0.2% (—Å–ª–∏—à–∫–æ–º –º–∞–ª–æ!)
P99: 5.8
Current threshold: 5.5
```

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü–æ–Ω–∏–∑–∏—Ç—å –ø–æ—Ä–æ–≥
trigger_when_above=5.0  # –ë—ã–ª–æ 5.5
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë—É–¥–µ–º –ª–æ–≤–∏—Ç—å –±–æ–ª—å—à–µ –∑–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–π

---

### –ü—Ä–∏–º–µ—Ä 3: Crypto –æ–ø—Ç–∏–º–∞–ª–µ–Ω

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
Trigger rate: 2.3% (–æ—Ç–ª–∏—á–Ω–æ!)
P95: 2.1%
Current threshold: 2.5%
```

**–†–µ—à–µ–Ω–∏–µ:** –ù–µ –º–µ–Ω—è—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ!

---

## üö® –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

1. **–ù–µ –∫–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å –Ω–∞ –º–∞–ª—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
   - –ú–∏–Ω–∏–º—É–º 30 –¥–Ω–µ–π
   - –ú–∏–Ω–∏–º—É–º 1000 –ø—Ä–æ–≤–µ—Ä–æ–∫

2. **–ù–µ –º–µ–Ω—è—Ç—å –≤—Å–µ —Å—Ä–∞–∑—É**
   - –ö–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å –ø–æ 2-3 –ø–æ—Ä–æ–≥–∞
   - –ù–∞–±–ª—é–¥–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ–¥–µ–ª—é
   - –ü–æ—Ç–æ–º —Å–ª–µ–¥—É—é—â–∏–µ

3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è**
   - –û–±–Ω–æ–≤–ª—è—Ç—å `–ê–£–î–ò–¢_–ü–û–†–û–ì–û–í.md`
   - –£–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞—Ç—É –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

4. **–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**
   - –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ª–µ–¥–∏—Ç—å –∑–∞ trigger rate
   - –ï—Å–ª–∏ —Å—Ç–∞–ª–æ —Ö—É–∂–µ - –æ—Ç–∫–∞—Ç–∏—Ç—å
   - –ï—Å–ª–∏ –ª—É—á—à–µ - –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å

5. **–£—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç**
   - –ù–µ —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - –ù–æ –∏ domain knowledge
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å > –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—Å—Ç—å

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

- [ ] –°–æ–±—Ä–∞–Ω–æ –º–∏–Ω–∏–º—É–º 30 –¥–Ω–µ–π –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–æ—Ä–æ–≥–∏
- [ ] –†–∞—Å—Å—á–∏—Ç–∞–Ω—ã –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–µ–π
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏/–∫–æ–¥–∞
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`–ê–£–î–ò–¢_–ü–û–†–û–ì–û–í.md`)
- [ ] –°–æ–∑–¥–∞–Ω backup —Å—Ç–∞—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞ —Å –Ω–æ–≤—ã–º–∏ –ø–æ—Ä–æ–≥–∞–º–∏
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ trigger rates –ø–µ—Ä–≤—É—é –Ω–µ–¥–µ–ª—é
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2024-12-14  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π

